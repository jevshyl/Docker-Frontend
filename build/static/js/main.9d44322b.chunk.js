(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{312:function(e,t,n){},313:function(e,t,n){},335:function(e,t){},337:function(e,t){},348:function(e,t){},350:function(e,t){},378:function(e,t){},379:function(e,t){},384:function(e,t){},386:function(e,t){},393:function(e,t){},412:function(e,t){},574:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(285),l=n.n(a),s=(n(312),n(313),n(8)),c=n(286);const o=n.n(c).a.create({baseURL:"http://localhost:8080"});o.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=t),e}),(e=>Promise.reject(e))),o.interceptors.request.use((e=>e),Promise.reject),o.interceptors.response.use((e=>e),(e=>Promise.reject(e)));var d=o;const u=new Set,j={initAuthoritySet:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JSON.parse(localStorage.getItem("user")||"{}");(e&&e.roles?e.roles:[]).forEach((e=>{e.authorities.forEach((e=>{u.add(e.name)}))}))},hasAuthority:e=>(j.initAuthoritySet(),u.has(e)),hasAuthorities:e=>{j.initAuthoritySet();for(const t of e)if(!u.has(t))return!1;return!0},hasAnyAuthority:e=>{for(const t of e)if(u.has(t))return!0;return!1},clearAuthorities:()=>{u.clear()}};var h=j;var x={getUser:async e=>{const{data:t}=await d.get("/user/".concat(e));return t},updateUser:e=>d.put("/user/".concat(e.id),e),addUser:e=>d.post("/user/registerUser",e).then((e=>e.data)),getAllUsers:()=>d.get("/user"),deleteUser:e=>d.delete("/user/".concat(e))},b=n(114),m=n(1);const O="user",g="token",p=()=>{throw new Error("No provider for the ActiveUserContext found")},f={user:null,login:p,logout:p,setActiveUser:p,loadActiveUser:p,checkRole:p},v=Object(i.createContext)(f);var E=v;const y=e=>{let{children:t}=e;const[n,r]=Object(i.useState)((()=>(()=>{const e=localStorage.getItem(O);return null===e?null:JSON.parse(e)})())),a=Object(s.q)(),l=e=>{r(e),localStorage.setItem(O,JSON.stringify(e))},c=()=>{h.clearAuthorities(),localStorage.clear(),r(null)},o=()=>n?x.getUser(n.id).then((e=>{l(e)})):null;return Object(i.useEffect)((()=>{null!==localStorage.getItem(g)&&o()}),[]),Object(i.useEffect)((()=>{null!==n&&(h.initAuthoritySet(n),localStorage.setItem(O,JSON.stringify(n)))}),[n]),Object(m.jsx)("div",{children:Object(m.jsx)(v.Provider,{value:{user:n,setActiveUser:l,login:async(e,t)=>(await d.post("user/login",{email:e,password:t}).then((e=>{console.log(e.headers.authorization),localStorage.setItem(g,e.headers.authorization);const t=e.headers.authorization.replace("Bearer ",""),n=b.decode(t);return x.getUser(n.sub).then((e=>{l(e)})),!0})),!1),logout:()=>{null!==localStorage.getItem(g)?(d.get("/logout").finally(c),a("/login")):c()},loadActiveUser:o,checkRole:function(e){return!!n&&n.roles.some((t=>t.name===e))}},children:t})})};var C=n(630),S=n(631),A=n(625),I=n(629),N=n(579),w=n(633),T=n(62),D=n(30);const L=D.object().shape({email:D.string(),password:D.string()});var U=()=>{const e={margin:"8px 0"},t=Object(s.q)(),{login:n}=Object(i.useContext)(E);return Object(m.jsx)(C.a,{children:Object(m.jsxs)(S.a,{elevation:10,style:{padding:20,height:"70vh",width:280,margin:"20px auto"},children:[Object(m.jsxs)(C.a,{children:[Object(m.jsx)("h2",{children:"Sign In"}),Object(m.jsx)("p",{children:"Default login:"}),Object(m.jsx)("p",{children:"email: admin@example.com"}),Object(m.jsx)("p",{children:"pw: 1234"})]}),Object(m.jsx)(T.b,{initialValues:{email:"",password:""},enableReinitialize:!0,validationSchema:L,onSubmit:e=>{n(e.email.toLowerCase(),e.password).then((()=>{console.log(e),t("/")})).catch((e=>{"undefined"!==typeof e.response&&401===e.response.status||403===e.response.status?alert("invalid login"):alert("login Error")}))},validateOnChange:!0,isInitialValid:!0,children:t=>Object(m.jsxs)(T.a,{onSubmit:t.handleSubmit,children:[Object(m.jsx)(A.a,{label:"email",id:"email","data-cy":"email",placeholder:"Enter username",fullWidth:!0,required:!0,autoFocus:!0,onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.email}),t.errors.email&&Object(m.jsx)("div",{id:"feedback",children:t.errors.email}),Object(m.jsx)(A.a,{id:"password",label:"password","data-cy":"password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.password}),t.errors.password&&Object(m.jsx)("div",{id:"feedback",children:t.errors.password}),Object(m.jsx)(I.a,{type:"submit","data-cy":"submit-login",color:"primary",variant:"contained",style:e,fullWidth:!0,children:"Sign in"})]})}),Object(m.jsx)(N.a,{children:Object(m.jsx)(w.a,{href:"#",children:"Forgot password ?"})}),Object(m.jsxs)(N.a,{children:[" ","Do you have an account ?",Object(m.jsx)(w.a,{href:"#",children:"Sign Up"})]})]})})},k=n(619);function M(e){let{path:t,name:n}=e;const i=Object(s.q)();return Object(m.jsx)(I.a,{variant:"contained",sx:{backgroundColor:"#00d4ff","&:hover":{backgroundColor:"#0f0fcf"}},onClick:()=>i("/".concat(t)),children:n})}function R(){var e;const t=Object(i.useContext)(E),{checkRole:n}=Object(i.useContext)(E);return Object(m.jsxs)(k.a,{display:"flex","data-cy":"navbar",alignItems:"center",justifyContent:"space-around",flexDirection:"row",height:"100px",sx:{background:"linear-gradient(135deg, #0f0fcf, #00d4ff)",color:"#fff",textAlign:"center"},children:[!t.user&&Object(m.jsx)(M,{path:"login",name:"Login"}),t.user&&Object(m.jsxs)(m.Fragment,{children:[n("ADMIN")&&Object(m.jsx)(M,{path:"admin",name:"Admin"}),Object(m.jsx)(M,{path:"",name:"Home"}),Object(m.jsx)(M,{path:"users",name:"Users"}),Object(m.jsx)(M,{path:"profileList/".concat(null===(e=t.user)||void 0===e?void 0:e.id),name:"Profile Page","data-cy":"nav-own-profilePage"}),Object(m.jsx)(I.a,{onClick:t.logout,children:"Logout"})]})]})}var B=e=>{let{requiredAuths:t,element:n}=e;const r=Object(i.useContext)(E);if(!(()=>{let e=localStorage.getItem("token");if(!e)return console.error("no token found"),!1;e=e.replace("Bearer ","");const t=b.decode(e);return!(!t||!t.exp||t.exp<Date.now()/1e3)})())return r.logout(),Object(m.jsx)(s.a,{to:"/login",replace:!0});return 0===t.length||t.some(h.hasAuthority)?Object(m.jsxs)("div",{children:[Object(m.jsx)(R,{}),n]}):Object(m.jsx)(s.a,{to:"/unauthorized",replace:!0})},q=n.p+"static/media/logo1.a04327d3.png";function _(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R,{}),Object(m.jsxs)(k.a,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh",sx:{background:"linear-gradient(135deg, #0f0fcf, #00d4ff)",color:"#fff",textAlign:"center"},children:[Object(m.jsx)("h1",{style:{fontFamily:"Arial, sans-serif",fontSize:"2.5rem",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"Welcome to the Homepage"}),Object(m.jsx)(k.a,{component:"img",src:q,alt:"logo",sx:{maxWidth:"350px",transition:"transform 0.3s ease-in-out","&:hover":{transform:"scale(1.1)"}}})]})]})}var F=n(634),z=n(636),H=n(635);var V=()=>{const e=Object(s.q)(),[t,n]=Object(i.useState)([]),{checkRole:r}=Object(i.useContext)(E);Object(i.useEffect)((()=>{x.getAllUsers().then((e=>{n(e.data)}))}),[]);return Object(m.jsxs)(m.Fragment,{children:[t.map((t=>Object(m.jsx)("div",{children:Object(m.jsx)(F.a,{sx:{minWidth:275},children:Object(m.jsxs)(H.a,{"data-cy":"userCard",children:[t.firstName," ",t.lastName,r("ADMIN")&&t.email,Object(m.jsxs)(z.a,{children:[r("ADMIN")&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(I.a,{size:"small",color:"primary",variant:"contained",onClick:()=>{return n=t.id,void e("../useredit/"+n);var n},children:"Edit"}),Object(m.jsx)(I.a,{size:"small",color:"error",variant:"contained",onClick:()=>{return e=t.id,void x.deleteUser(e);var e},children:"Delete"})]}),Object(m.jsx)(I.a,{size:"small","data-cy":"view-button",color:"primary",variant:"contained",onClick:()=>e("../profileList/".concat(null===t||void 0===t?void 0:t.id)),children:"View"})]})]})})},t.id))),r("ADMIN")&&Object(m.jsx)(I.a,{size:"small",color:"success",variant:"contained",onClick:()=>{e("../useredit/")},children:"Add"})]})},P=n(620);var W=e=>{let{user:t,submitActionHandler:n}=e;const i=Object(s.q)(),r=Object(T.c)({initialValues:{id:t.id,lastName:t?t.lastName:"",firstName:t?t.firstName:"",email:t?t.email:"",roles:t?t.roles:[],listElements:t?t.listElements:[]},validationSchema:Object(D.object)({firstName:Object(D.string)().required().min(2).max(50),lastName:Object(D.string)().required().min(2).max(50),email:Object(D.string)().required().email()}),onSubmit:e=>{n(e)},enableReinitialize:!0});return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:r.handleSubmit,children:[Object(m.jsxs)(P.a,{sx:{paddingTop:"15px"},children:[Object(m.jsx)(A.a,{id:"firstName",label:"Firstname",variant:"outlined",sx:{paddingRight:"10px"},onBlur:r.handleBlur,onChange:r.handleChange,error:Boolean(r.touched.firstName&&r.errors.firstName),value:r.values.firstName}),r.errors.firstName&&r.touched.firstName?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.firstName}):null,Object(m.jsx)(A.a,{id:"lastName",label:"Lastname",variant:"outlined",sx:{paddingRight:"10px"},onBlur:r.handleBlur,onChange:r.handleChange,error:Boolean(r.touched.lastName&&r.errors.lastName),value:r.values.lastName}),r.errors.lastName&&r.touched.lastName?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.lastName}):null,Object(m.jsx)(A.a,{id:"email",label:"E-Mail",variant:"outlined",onBlur:r.handleBlur,onChange:r.handleChange,error:Boolean(r.touched.email&&r.errors.email),value:r.values.email}),r.errors.email&&r.touched.email?Object(m.jsx)("div",{style:{color:"red"},children:r.errors.email}):null]}),Object(m.jsxs)("div",{children:[Object(m.jsxs)(I.a,{sx:{marginTop:"15px",marginRight:"10px"},variant:"contained",color:"success",type:"submit",disabled:!(r.dirty&&r.isValid),children:[t.id&&"Save",!t.id&&"Add"]}),Object(m.jsx)(I.a,{sx:{marginTop:"15px"},variant:"contained",color:"error",onClick:()=>{i("/users")},children:"Cancel"})]})]})})};var J,Y=()=>{const e=Object(s.q)(),{userId:t}=Object(s.s)(),[n,r]=Object(i.useState)({id:"",firstName:"",lastName:"",email:"",roles:[],listElements:[]});Object(i.useEffect)((()=>()=>{t&&x.getUser(t).then((e=>r(e)))}),[t]);return Object(m.jsx)(W,{user:n,submitActionHandler:n=>{void 0!==t?x.updateUser(n).then((()=>{e("../users")})):x.addUser(n).then((()=>{e("/users")}))}})};!function(e){e.USER_MODIFY="USER_MODIFY",e.USER_DEACTIVATE="USER_DEACTIVATE",e.DEFAULT="DEFAULT",e.SEE_ADMIN_PAGE="SEE_ADMIN_PAGE",e.LIST_ELEMENT_CREATE="LIST_ELEMENT_CREATE",e.LIST_ELEMENT_DELETE="LIST_ELEMENT_DELETE",e.LIST_ELEMENT_MODIFY="LIST_ELEMENT_MODIFY"}(J||(J={}));var G=J,K=n(640);function Q(e){let{listElement:t,onClick:n}=e;return Object(m.jsxs)(F.a,{sx:{minHeigth:"100px",height:"100%"},children:[Object(m.jsx)(K.a,{title:t.title}),Object(m.jsx)(H.a,{children:t.text}),Object(m.jsx)(I.a,{onClick:n,variant:"contained",children:"View List"})]})}var X=n(641),Z=n(621),$=n(642),ee=n(643),te=n(628),ne=n(622),ie=n(626);var re=e=>{let{listElement:t,submitActionHandler:n,onCancel:r}=e;const{userId:a}=Object(s.s)(),[l,c]=Object(i.useState)(null);Object(i.useEffect)((()=>{a&&x.getUser(a).then((e=>c(e)))}),[a]);const o=Object(T.c)({enableReinitialize:!0,initialValues:{id:null===t||void 0===t?void 0:t.id,title:(null===t||void 0===t?void 0:t.title)||"",text:(null===t||void 0===t?void 0:t.text)||"",importance:(null===t||void 0===t?void 0:t.importance)||"LOW",userId:(null===l||void 0===l?void 0:l.id)||"",creationDate:null===t||void 0===t?void 0:t.creationDate},validationSchema:Object(D.object)({title:Object(D.string)().required("Title is required").min(2,"Too short").max(254,"Too long"),text:Object(D.string)().required("Text is required").min(2,"Too short").max(200,"Too long"),importance:Object(D.string)().required("Importance is required").oneOf(["LOW","MEDIUM","HIGH"])}),onSubmit:e=>n(e)});return Object(i.useEffect)((()=>{null!==l&&void 0!==l&&l.id&&o.setFieldValue("userId",l.id)}),[null===l||void 0===l?void 0:l.id]),Object(m.jsx)("form",{onSubmit:o.handleSubmit,children:Object(m.jsxs)(P.a,{sx:{paddingTop:"15px"},children:[Object(m.jsx)(A.a,{id:"title","data-cy":"title",label:"Title",name:"title",variant:"outlined",sx:{paddingRight:"10px",marginBottom:"10px"},onBlur:o.handleBlur,onChange:o.handleChange,error:Boolean(o.touched.title&&o.errors.title),value:o.values.title}),o.touched.title&&o.errors.title&&Object(m.jsx)("div",{style:{color:"red"},children:o.errors.title}),Object(m.jsx)(A.a,{id:"text","data-cy":"text",label:"Text",name:"text",variant:"outlined",sx:{paddingRight:"10px",marginBottom:"10px"},onBlur:o.handleBlur,onChange:o.handleChange,error:Boolean(o.touched.text&&o.errors.text),value:o.values.text}),o.touched.text&&o.errors.text&&Object(m.jsx)("div",{style:{color:"red"},children:o.errors.text}),Object(m.jsx)(te.a,{id:"importance-label",children:"Importance"}),Object(m.jsxs)(ne.a,{labelId:"importance-label","data-cy":"select",id:"importance",name:"importance",value:o.values.importance,onChange:o.handleChange,onBlur:o.handleBlur,children:[Object(m.jsx)(ie.a,{value:"LOW",children:"Low"}),Object(m.jsx)(ie.a,{value:"MEDIUM",children:"Medium"}),Object(m.jsx)(ie.a,{value:"HIGH",children:"High"})]}),o.touched.importance&&o.errors.importance&&Object(m.jsx)("div",{style:{color:"red"},children:o.errors.importance}),Object(m.jsxs)(P.a,{sx:{marginTop:"15px"},children:[Object(m.jsx)(I.a,{variant:"contained","data-cy":"submit",color:"success",type:"submit",disabled:!(o.dirty&&o.isValid),sx:{marginRight:"10px"},children:o.values.id?"Save":"Add"}),r&&Object(m.jsx)(I.a,{variant:"contained",color:"error",onClick:r,children:"Cancel"})]})]})})};var ae={updateListElement:async e=>await d.put("/list-element/".concat(e.id),e),addListElement:async e=>(await d.post("/list-element",e)).data,deleteListElement:e=>d.delete("/list-element/".concat(e))};var le=e=>{let{id:t,open:n,setOpen:r,dialogTitle:a,dialogContent:l,importance:s,listElement:c,deleteAction:o}=e;const[d,u]=Object(i.useState)(!1),j=()=>null===r||void 0===r?void 0:r(!1),{checkRole:h,user:x}=Object(i.useContext)(E);return Object(m.jsxs)(X.a,{open:n,onClose:j,sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(m.jsx)(Z.a,{children:a}),Object(m.jsx)($.a,{children:d&&c?Object(m.jsx)(re,{listElement:c,submitActionHandler:e=>{ae.updateListElement(e).then((()=>{u(!1),window.location.reload(),j()}))},onCancel:()=>u(!1)}):Object(m.jsxs)(P.a,{sx:{display:"flex",justifyContent:"center",gap:2,flexDirection:"column"},children:[Object(m.jsx)(P.a,{children:l}),Object(m.jsxs)(P.a,{children:["Importance: ",s]})]})}),!d&&Object(m.jsx)(ee.a,{children:Object(m.jsxs)(P.a,{sx:{display:"flex",width:"100%",justifyContent:"space-between"},children:[(!!h("ADMIN")||t===(null===x||void 0===x?void 0:x.id))&&c&&Object(m.jsxs)(P.a,{sx:{display:"flex",gap:1},children:[Object(m.jsx)(I.a,{onClick:()=>u(!0),children:"Update"}),Object(m.jsx)(I.a,{onClick:o,color:"error",children:"Delete"})]}),Object(m.jsx)(P.a,{sx:{display:"flex",gap:1},children:Object(m.jsx)(I.a,{onClick:j,children:"Cancel"})})]})})]})};function se(){var e;const[t,n]=Object(i.useState)({id:"",firstName:"",lastName:"",email:"",roles:[],listElements:[]}),{userId:r}=Object(s.s)();Object(i.useEffect)((()=>{r&&x.getUser(r).then((e=>n(e)))}),[r]);const[a,l]=Object(i.useState)(!1),[c,o]=Object(i.useState)(null),[d,u]=Object(i.useState)(null),{checkRole:j}=Object(i.useContext)(E),h=Object(i.useContext)(E);return Object(m.jsxs)(k.a,{display:"flex",flexDirection:"column",height:"100vh",sx:{background:"linear-gradient(135deg, #0f0fcf, #00d4ff)",color:"#fff",textAlign:"center"},children:[Object(m.jsx)(le,{id:null===t||void 0===t?void 0:t.id,open:a,setOpen:l,dialogTitle:null===c||void 0===c?void 0:c.title,dialogContent:null===c||void 0===c?void 0:c.text,importance:null===c||void 0===c?void 0:c.importance,listElement:c||void 0,deleteAction:()=>{null!==c&&void 0!==c&&c.id&&ae.deleteListElement(c.id).then((()=>{l(!1)})),window.location.reload()}}),(()=>{var e;return t.id===(null===h||void 0===h||null===(e=h.user)||void 0===e?void 0:e.id)})()&&j("USER")&&Object(m.jsx)(k.a,{sx:{margin:"20px 0"},children:Object(m.jsx)(I.a,{"data-cy":"addListElement",variant:"contained",color:"primary",onClick:()=>u({id:"",title:"",text:"",importance:""}),children:"Add New List Element"})}),d&&Object(m.jsx)(re,{submitActionHandler:e=>{ae.addListElement(e).then((e=>{e.data&&u(null)})),window.location.reload()}}),Object(m.jsx)(k.a,{display:"flex",alignItems:"flex-start",justifyContent:"flex-start",margin:"25px",flexDirection:"column",height:"250px",sx:{color:"#fff",textAlign:"center"},children:Object(m.jsxs)("h3",{children:["Name: ",null===t||void 0===t?void 0:t.firstName," ",null===t||void 0===t?void 0:t.lastName]})}),Object(m.jsx)(C.a,{container:!0,spacing:2,children:null===t||void 0===t||null===(e=t.listElements)||void 0===e?void 0:e.map(((e,t)=>Object(m.jsx)(C.a,{item:!0,xs:12,sm:6,md:4,children:Object(m.jsx)(Q,{listElement:e,onClick:()=>{o(e),l(!0)}})},e.id||t)))})]})}function ce(){return Object(m.jsx)(k.a,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh",sx:{background:"linear-gradient(135deg, #0f0fcf, #00d4ff)",color:"#fff",textAlign:"center"},children:Object(m.jsx)(k.a,{children:Object(m.jsx)("h1",{children:"Welcome to admin page"})})})}var oe=()=>Object(m.jsxs)(s.d,{children:[Object(m.jsx)(s.b,{path:"/",element:Object(m.jsx)(_,{})}),Object(m.jsx)(s.b,{path:"/login",element:Object(m.jsx)(U,{})}),Object(m.jsx)(s.b,{path:"/users",element:Object(m.jsx)(B,{requiredAuths:[],element:Object(m.jsx)(V,{})})}),Object(m.jsx)(s.b,{path:"/useredit",element:Object(m.jsx)(B,{requiredAuths:[G.USER_DEACTIVATE,G.USER_MODIFY],element:Object(m.jsx)(Y,{})})}),Object(m.jsx)(s.b,{path:"/profileList/:userId",element:Object(m.jsx)(B,{requiredAuths:[],element:Object(m.jsx)(se,{})})}),Object(m.jsx)(s.b,{path:"/admin",element:Object(m.jsx)(B,{requiredAuths:[G.SEE_ADMIN_PAGE],element:Object(m.jsx)(ce,{})})}),Object(m.jsx)(s.b,{path:"/useredit/:userId",element:Object(m.jsx)(B,{requiredAuths:[G.USER_MODIFY],element:Object(m.jsx)(Y,{})})}),Object(m.jsx)(s.b,{path:"*",element:Object(m.jsx)("div",{children:"Not Found"})})]});var de=function(){return Object(m.jsx)(y,{children:Object(m.jsx)(oe,{})})},ue=n(34);l.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(ue.a,{children:Object(m.jsx)(de,{})})}))}},[[574,1,2]]]);
//# sourceMappingURL=main.9d44322b.chunk.js.map